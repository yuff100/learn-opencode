# v1.1.27：修复桌面端体验问题

**发布日期**：2026年01月20日

---

## 一句话总结

修复了桌面应用启动闪屏、消息列表滚动、配置持久化等问题，使用体验更流畅。

---

## 改进：修复桌面端体验问题

### 之前的问题
桌面应用在使用过程中可能会遇到一些小问题：
- 启动时偶尔闪一下首页
- 消息列表滚动时可能溢出或卡顿
- 配额限制设置在刷新后会丢失
- 不小心缩放页面导致布局混乱

### 现在的情况
这些问题都已修复，桌面应用现在更稳定、更流畅：
- ✅ 启动不再闪屏，直接进入工作状态
- ✅ 消息列表滚动流畅，不再溢出
- ✅ 配额限制会持久保存，刷新不丢失
- ✅ 完全禁用了桌面端的缩放功能，避免误触

---

## 新功能：选择项目目录文本

### 这次更新了什么？
现在你可以在桌面应用中直接选择并复制项目目录的路径文本了。

### 如何使用？
1. 打开桌面应用
2. 在项目设置或会话信息中找到项目目录路径
3. 点击路径文本即可选中复制

---

## 问题修复：MCP 服务器截断处理

### 之前的问题
当 MCP 服务器返回大量内容时，可能会出现截断处理不当的情况。

### 现在的情况
现在 MCP 服务器的截断处理更加可靠，长内容不会意外丢失。

---

## 问题修复：TUI 内存泄漏

### 之前的问题
在 TUI（终端界面）模式下使用一段时间后，内存占用会不断增加。

### 现在的情况
修复了消息历史清理逻辑，现在会正确释放不再需要的消息，防止内存泄漏。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 桌面应用用户 | ✅ 强烈推荐，修复了多个体验问题 |
| TUI 用户 | ✅ 推荐，修复了内存泄漏 |
| 刚升了 v1.1.26 | 可以等下次，但升了也没坏处 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

**核心功能 (Core)**
- 移除 patch 工具中的文件时间断言
- 确保 MCP 服务器的截断处理正确应用
- 更新 batch 工具定义，明确最大工具调用值

**TUI**
- 在工具选择提示中添加空格切换提示
- 修复消息历史清理以防止 TUI 中的内存泄漏

**桌面端 (Desktop)**
- 修复应用启动时的首页闪屏问题
- 修复应用中的 localStorage 配额处理
- 持久化配额限制以防止刷新后丢失
- 完全禁用桌面应用中的缩放功能
- 修复消息列表溢出和滚动问题
- 为最近会话弹出框添加 8px 内边距
- 移除编辑项目对话框表单的顶部内边距
- 更新会话消息弹出框的间距为 28px
- 将会话消息弹出框定位在顶部
- 当弹出框打开时保留会话悬停状态并更新边框半径
- 更新会话悬停弹出框样式
- 更新审查会话空状态样式
- 添加在 Web 界面中选择项目目录文本的功能

**感谢 5 位社区贡献者**
</details>

---

[← 返回更新日志](./index.md)
