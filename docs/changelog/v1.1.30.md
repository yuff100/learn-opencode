# v1.1.30：权限配置更方便，Todo 工具回归

**发布日期**：2026年01月21日

---

## 一句话总结

这次更新让权限路径配置更灵活，同时为 OpenAI 模型找回了 Todo List 工具，让任务管理更顺手。

---

## 新功能：权限路径支持 `~`

### 这次更新了什么？

现在你在配置权限白名单时，可以使用 `~` 或 `$HOME` 来代表你的用户主目录了。

### 为什么需要这个？

以前配置路径必须写完整的绝对路径（比如 `/Users/yourname/projects`），很麻烦，而且在不同电脑上配置文件不能通用。现在你可以写 `~/projects`，不管在哪台电脑上，它都能自动识别为当前用户的主目录。

### 如何使用？

在你的配置文件或启动参数中：

```bash
# 以前（必须写死）：
opencode --allow-read "/Users/alice/code"

# 现在（更加灵活）：
opencode --allow-read "~/code"
```

---

## 功能回归：OpenAI 模型的 Todo 工具

### 发生了什么？

之前版本中，OpenAI 模型的 Todo List 工具暂时缺席了。在这个版本中，它回来了！

### 有什么用？

Todo List 工具允许 AI 在执行复杂任务时，自己创建一个任务清单，做完一项勾选一项。这对于长任务、多步骤任务非常重要，能防止 AI "忘事" 或 "走偏"。

### 如何体验？

使用 OpenAI 模型（如 GPT-4o）进行复杂任务时，你可能会看到它主动列出计划：

1. [ ] 分析代码结构
2. [ ] 修改配置文件
3. [ ] 运行测试

这就是 Todo 工具在工作。

---

## 桌面版改进

- **终端体验优化**：修复了一些终端显示和交互的问题。
- **OAuth 修复**：登录第三方服务（如 GitHub）时更加稳定。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 经常配置路径白名单 | ✅ 推荐升级 |
| 使用 OpenAI 模型做复杂任务 | ✅ 强烈推荐 |
| 其他用户 | 可以升级 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core
- Add session list and session fork support to ACP (@remorses)
- Fix metadata matching to use model.id instead of model.api.id to support legacy model identifiers
- Adjust textVerbosity and reasoningEffort defaults to better align with Codex CLI behavior
- Implement home directory expansion for permission patterns using `~` and `$HOME` prefixes (@Danztee)
- Add back todo list tools for OpenAI models
- Persist loaded model and mode when loading ACP sessions (@noamzbr)
- Update GitLab packages for better self-hosted instance support (@vglafirov)
- Make the models.dev domain configurable for offline environments (@bartbroere)

### Desktop
- Rename favicon on web again
- Improve provider OAuth error handling in app
- Fix renaming non-git projects affecting other projects
- Tab should select suggestion in the app
- Fix type error
- Fix terminal issues and regressions
- Remove terminal button border to align with close button (@allanhvam)
- Fixed navigation issues when working with large sessions in desktop app (@dbpolito)

</details>

---

[← 返回更新日志](./index.md)
