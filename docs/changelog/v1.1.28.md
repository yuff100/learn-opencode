# v1.1.28：桌面版设置界面焕新

**发布日期**：2026年01月20日

---

## 一句话总结

桌面应用设置界面大改版，更加美观易用；修复了终端挂起和会话加载死循环等关键 Bug。

---

## 改进：设置界面大改版

### 这次更新了什么？
桌面应用的设置面板进行了全面的视觉升级和布局优化：
- **更美观**：增加了渐变标题，优化了间距和字体。
- **更易用**：字体选择器现在直接显示字体预览，快捷键和通用设置有了专属图标。
- **布局优化**：内容全宽显示，去除了多余的边框，整体更加清爽。

---

## 修复：终端挂起问题

### 之前的问题
在某些情况下，终端退出或按 Ctrl+D 时会卡死，导致界面无响应。

### 现在的情况
修复了终端退出逻辑，现在退出终端更加流畅，面板会正确关闭。

---

## 修复：会话加载死循环

### 之前的问题
桌面应用有时会出现会话加载死循环的问题，导致 CPU 占用高且无法正常使用。

### 现在的情况
修复了导致死循环的竞争条件，会话加载更加稳定。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 桌面版用户 | ✅ 必须升级，设置界面更好看，修复了死循环 Bug |
| 经常用终端 | ✅ 推荐，修复了卡死问题 |
| 其他用户 | 可以升级 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

**核心功能 (Core)**
- 修复 MCP 工具结果中的输入状态保留问题
- 支持不带显式占位符的命令参数
- 调整 Codex 提示词，鼓励自主决策
- 终端不再在退出或 Ctrl+D 时挂起
- 修复 MCP 中 OAuth 回调注册时机

**桌面端 (Desktop)**
- 重构 Select 组件样式
- 修复编辑项目名称时的竞争条件
- 增加 macOS 重启和重载菜单项
- 修复会话加载死循环
- 改进设置面板 UI（渐变、间距、图标）
- 字体选择器支持预览字体样式
- 增加 Windows 端到端测试

</details>

---

[← 返回更新日志](./index.md)
