---
title: 管理对话
subtitle: 高效管理你的会话
course: OpenCode 中文实战课
stage: 第二阶段
lesson: "2.2"
duration: 10 分钟
practice: 15 分钟
level: 新手
description: 用 /new 新建会话、/sessions 切换、/undo 撤销、/export 导出，高效管理 OpenCode 对话记录。
tags:
  - 会话
  - 撤销
  - 导出
prerequisite:
  - 2.1 界面与基础操作
---

# 管理对话

> 💡 **一句话总结**：用 `/new` 新建会话，用 `/sessions` 切换，用 `/undo` 撤销，用 `/export` 导出。

## 📝 课程笔记

本课核心知识点整理：

<img src="/images/2-daily/sessions-notes.mini.jpeg" 
     alt="管理对话学霸笔记" 
     data-zoom-src="/images/2-daily/sessions-notes.jpeg" />

---

## 学完你能做什么

- 创建和切换多个会话
- 撤销 AI 的错误操作
- 导出对话记录
- 压缩过长的上下文

---

## 你现在的困境

- 对话越来越长，AI 开始混淆上下文
- AI 改错了代码，不知道怎么撤销
- 重要的对话想保存下来，不知道怎么导出

---

## 什么时候用这一招

- 当你需要：同时处理多个不同任务
- 而且不想：让 AI 把不相关的上下文混在一起

---

## 🎒 开始前的准备

> 确保你已经完成以下事项：

- [ ] 完成了 [2.1 界面与基础操作](./01-interface)
- [ ] 当前有一个进行中的对话

---

## 核心思路
<AdInArticle />

### 为什么需要多个会话

- **隔离上下文**：不同任务用不同会话，避免 AI 混淆
- **并行工作**：一边让 AI 写代码，一边让 AI 分析文档
- **保留历史**：重要对话可以保留，随时回看

### 会话管理命令速览

| 命令 | 作用 |
|-----|------|
| `/new` | 新建会话 |
| `/sessions` | 查看并切换会话 |
| `/undo` | 撤销上一步操作 |
| `/redo` | 重做被撤销的操作 |
| `/compact` | 压缩上下文 |
| `/export` | 导出对话记录 |
| `/share` | 分享会话（生成链接） |

---

## 跟我做

### 第 1 步：新建一个会话

**为什么**  
开始新任务时，用新会话避免之前的上下文干扰。

输入：

```
/new
```

或使用快捷键：<kbd>Ctrl</kbd>+<kbd>X</kbd> <kbd>N</kbd>

**你应该看到**：界面清空，进入新会话

### 第 2 步：在新会话中对话

**为什么**  
让新会话有一些内容，方便后面切换查看。

输入：

```
你好，这是第二个会话
```

### 第 3 步：查看并切换会话

**为什么**  
学会在多个会话之间切换。

输入：

```
/sessions
```

**你应该看到**：会话列表，包含刚才的两个会话

用 <kbd>↑</kbd> <kbd>↓</kbd> 选择，按 <kbd>Enter</kbd> 切换。

### 第 4 步：测试撤销功能

**为什么**  
AI 可能会做错事，撤销能帮你恢复。

先让 AI 做一个操作（比如创建文件）：

```
创建一个 test.txt 文件，内容写 "hello"
```

然后撤销：

```
/undo
```

**你应该看到**：文件被删除，恢复到操作前的状态

::: tip 💡 撤销与 Git 联动
如果项目是 Git 仓库，`/undo` 会利用 Git 来撤销文件更改，更安全可靠。
:::

### 第 5 步：压缩过长的上下文

**为什么**  
对话太长会占用 Token，压缩后可以节省成本。

输入：

```
/compact
```

**你应该看到**：AI 会总结之前的对话，然后清理旧消息

### 第 6 步：导出对话记录

**为什么**  
保存重要对话，方便日后查阅。

输入：

```
/export
```

**你应该看到**：对话被导出为 Markdown 文件

---

## 检查点 ✅

> 全部通过才能继续

- [ ] `/new` 能创建新会话
- [ ] `/sessions` 能看到会话列表并切换
- [ ] `/undo` 能撤销 AI 的操作
- [ ] `/export` 能导出对话

---

## 踩坑提醒

| 现象 | 原因 | 解决 |
|-----|-----|-----|
| `/undo` 没效果 | AI 没有修改任何文件 | 只有文件操作才能撤销 |
| 会话太多找不到 | 会话名都是默认的 | 养成用 `/new 任务名` 命名的习惯 |
| `/compact` 后丢了重要信息 | 压缩会删除详细对话 | 重要信息先 `/export` 备份 |

---

## 本课小结

你学会了：

1. 用 `/new` 新建会话
2. 用 `/sessions` 切换会话
3. 用 `/undo` `/redo` 撤销和重做
4. 用 `/compact` 压缩上下文
5. 用 `/export` 导出对话

---

## 下一课预告

> 下一课我们学习 **[3.1 Plan vs Build：规划与执行](../3-workflow/01-plan-build.md)**。
>
> 你会学到：
> - Plan Agent 和 Build Agent 的区别
> - 什么场景该用 Plan，什么该用 Build
> - 用 <kbd>Tab</kbd> 键快速切换模式